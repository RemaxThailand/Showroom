<ion-header>
  <ion-navbar dark>
    <button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>รถเข็นสินค้า</ion-title>
    <ion-buttons end>
      <button royal (click)="removeProduct()">
        <ion-icon name="md-trash"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content>
  <ion-card>
    <ion-list>
      <ion-item class="padding-left-5" *ngFor="let p of product;#isOdd=odd;#isEven=even" [class.bg-lightYellow]="p.isSelected" [class.bg-light]="isOdd">
        <ion-checkbox dark item-left class="margin-right-10" [(ngModel)]="p.isSelected"></ion-checkbox>
        <ion-label class="margin-0">
          <ion-item no-lines class="padding-left-5 item-text-wrap" [class.bg-lightYellow]="p.isSelected" [class.bg-light]="isOdd">
            <ion-thumbnail item-right class="margin-0 margin-top-3">
              <table>
                <tr>
                  <td colspan="3">
                    <img src="https://img.remaxthailand.co.th/300x300/product/{{p.sku}}/1.jpg" align="right" class="margin-right-2">
                  </td>
                </tr>
                <tr [hidden]="p.remain <= 0">
                  <td>
                    <button dark outline (click)="updateQuantity(p, -1)">
                      <ion-icon class="margin-left-5 margin-right-5" name="md-remove"></ion-icon>
                    </button>
                  </td>
                  <td>
                    <button outline danger class="bg-lightYellow" (click)="setQuantity(p)">
                      <h2><b danger>{{numberWithCommas(p.qty)}}</b></h2>
                    </button>
                  </td>
                  <td>
                    <button dark outline (click)="updateQuantity(p, 1)">
                      <ion-icon class="margin-left-5 margin-right-5" name="md-add"></ion-icon>
                    </button>
                  </td>
                </tr>
                <tr [hidden]="p.remain > 0">
                  <td colspan="3">
                    <ion-badge danger class="margin-bottom-2">สินค้าหมด</ion-badge>
                  </td>
                </tr>
              </table>
            </ion-thumbnail>
            <h2 class="text-wrap">{{p.name}}</h2>
            <p>ราคา <b danger>{{numberWithCommas(p.sellPrice)}}</b> บาท
              <ion-badge class="bg-lightRed">{{(p.sellPrice/p.price*100-100).toFixed(2)}}%</ion-badge>
            </p>
          </ion-item>
        </ion-label>
      </ion-item>
    </ion-list>
  </ion-card>
</ion-content>

<ion-footer class="border-top-gray">
  <ion-toolbar>
    <table width="100%">
      <tr>
        <td class="padding-left-10 padding-right-5" valign="middle" width="10" nowrap="nowrap">
          <span class="margin-right-10">รวม</span>
        </td>
        <td width="10" nowrap="nowrap">
          <h4 class="margin-top-10 margin-right-10"><b danger>{{numberWithCommas(totalPrice)}}</b></h4>
        </td>
        <td width="10 " nowrap="nowrap">
          บาท
        </td>
        <td align="right">
          <button danger>
            <ion-icon name="md-checkmark-circle"></ion-icon> ยืนยันคำสั่งซื้อ
          </button>
        </td>
      </tr>
    </table>
  </ion-toolbar>
</ion-footer>
